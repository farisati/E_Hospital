{% extends 'patient/patient_base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container mt-4">

    <h2 class="fw-bold text-primary mb-3">Welcome, {{ request.user.username }} ðŸ‘‹</h2>
    <p class="text-muted">Here is a summary of your medical activities.</p>

    <hr>

    <!-- Upcoming Appointments -->
     
    <!-- Recent Medical Records -->
    <h4 class="mt-4 mb-3">ðŸ§¾ Recent Medical Records</h4>

    {% if recent_records %}
        <ul class="list-group mb-4">
            {% for record in recent_records %}
                <li class="list-group-item">
                    <strong>{{ record.title }}</strong><br>
                    Added on: {{ record.created_at|date:"M d, Y" }} <br>
                    Notes: {{ record.notes|truncatewords:12 }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">No medical records found.</p>
    {% endif %}

    <hr>

    <!-- Recent Payments -->
    <h4 class="mt-4 mb-3">ðŸ’³ Recent Payments</h4>

    {% if payments %}
        <ul class="list-group mb-4">
            {% for pay in payments %}
                <li class="list-group-item">
                    <strong>â‚¹{{ pay.amount }}</strong> - {{ pay.paid_at|date:"M d, Y" }} <br>
                    Method: {{ pay.method }}<br>
                    Status:
                    {% if pay.status == 'paid' %}
                        <span class="badge bg-success">Paid</span>
                    {% else %}
                        <span class="badge bg-warning">Pending</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">No payments found.</p>
    {% endif %}

</div>
{% endblock %}
